|属性|描述|
| Name | 命令模式（Command Pattern）是一种数据驱动的设计模式， |
|  | 它属于行为型模式。 |
|  | 命令模式是对命令的封装。命令模式把发出命令的责任和执行命令的责任分割开，委派给不同的对象。 |
| 意图 | 命令模式可以对发送者和接收者完全解耦，发送者与接收者之间没有直接引用关系，发送请求的对象只需要知道如何发送请求，而不必知道如何完成请求。这就是命令模式的模式动机。 |
|  | 不少Command模式的代码都是针对图形界面的,它实际就是菜单命令,我们在一个下拉菜单选择一个命令时,然后会执行一些动作. |
| 适用性 | 主要解决： |
|  | 在软件系统中，行为请求者与行为实现者通常是一种紧耦合的关系，但某些场合，比如需要对行为进行记录、撤销或重做、事务等处理时，这种无法抵御变化的紧耦合的设计就不太合适。 |
|  | 何时使用： |
|  | 在某些场合，比如要对行为进行"记录、撤销/重做、事务"等处理，这种无法抵御变化的紧耦合是不合适的。在这种情况下，如何将"行为请求者"与"行为实现者"解耦？将一组行为抽象为对象，可以实现二者之间的松耦合。。 |
|  | 如何解决： |
|  | 通过调用者调用接受者执行命令，顺序：调用者→接受者→命令。 |
| 参与者 | 客户端(Client)： |
|  | 创建一个具体命令(ConcreteCommand)对象并确定其接收者。 |
|  | 命令(Command)： |
|  | 声明了一个给所有具体命令类的抽象接口。 |
|  | 具体命令(ConcreteCommand)： |
|  | 定义一个接收者和行为之间的弱耦合； |
|  | 实现execute()方法，负责调用接收者的相应操作。execute()方法通常叫做执行方法。 |
|  | 请求者(Invoker)： |
|  | 负责调用命令对象执行请求，相关的方法叫做行动方法。 |
|  | 接收者(Receiver)： |
|  | 负责具体实施和执行一个请求。任何一个类都可以成为接收者，实施和执行请求的方法叫做行动方法。 |
|  |  |
|  |  |
| 效果 | 优点： |
|  | 1.     命令模式使新的命令很容易地被加入到系统里。 |
|  | 2.     允许接收请求的一方决定是否要否决请求。 |
|  | 3.     能较容易地设计一个命令队列。 |
|  | 4.     可以容易地实现对请求的撤销和恢复。 |
|  | 5.     在需要的情况下，可以较容易地将命令记入日志。 |
|  | 缺点： |
|  | 使用命令模式可能会导致某些系统有过多的具体命令类。 |
|  | 使用场景： |
|  | 认为是命令的地方都可以使用命令模式，比如： |
|  | 1、GUI 中每一个按钮都是一条命令。 |
|  | 2、模拟 CMD。 |
|  | 注意事项： |
|  | 系统需要支持命令的撤销(Undo)操作和恢复(Redo)操作，也可以考虑使用命令模式，见命令模式的扩展。 |
| 实现 | 基本 |
|  | 接收者角色类 |
|  |  |
|  | public class Receiver { |
|  | /** |
|  | * 真正执行命令相应的操作 |
|  | */ |
|  | public void action(){ |
|  | System.out.println("执行操作"); |
|  | } |
|  | } |
|  |  |
|  | 抽象命令角色类 |
|  |  |
|  | public interface Command { |
|  | /** |
|  | * 执行方法 |
|  | */ |
|  | void execute(); |
|  | } |
|  |  |
|  | 具体命令角色类 |
|  |  |
|  | public class ConcreteCommand implements Command { |
|  | //持有相应的接收者对象 |
|  | private Receiver receiver = null; |
|  | /** |
|  | * 构造方法 |
|  | */ |
|  | public ConcreteCommand(Receiver receiver){ |
|  | this.receiver = receiver; |
|  | } |
|  | @Override |
|  | public void execute() { |
|  | //通常会转调接收者对象的相应方法，让接收者来真正执行功能 |
|  | receiver.action(); |
|  | } |
|  | } |
|  |  |
|  | 请求者角色类 |
|  |  |
|  | public class Invoker { |
|  | /** |
|  | * 持有命令对象 |
|  | */ |
|  | private Command command = null; |
|  | /** |
|  | * 构造方法 |
|  | */ |
|  | public Invoker(Command command){ |
|  | this.command = command; |
|  | } |
|  | /** |
|  | * 行动方法 |
|  | */ |
|  | public void action(){ |
|  |  |
|  | command.execute(); |
|  | } |
|  | } |
|  |  |
|  | 客户端角色类 |
|  |  |
|  | public class Client { |
|  | public static void main(String[] args) { |
|  | //创建接收者 |
|  | Receiver receiver = new Receiver(); |
|  | //创建命令对象，设定它的接收者 |
|  | Command command = new ConcreteCommand(receiver); |
|  | //创建请求者，把命令对象设置进去 |
|  | Invoker invoker = new Invoker(command); |
|  | //执行方法 |
|  | invoker.action(); |
|  | } |
|  | } |
|  |  |
|  | 来自 |
|  |
